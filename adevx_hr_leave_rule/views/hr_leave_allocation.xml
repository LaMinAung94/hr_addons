<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="0">


        <!-- Inherit Form View to Modify it -->
        <record id="view_inherit_hr_leave_allocation_form" model="ir.ui.view">
            <field name="name">view.inherit.hr.leave.allocation.form</field>
            <field name="model">hr.leave.allocation</field>
            <field name="inherit_id" ref="hr_holidays.hr_leave_allocation_view_form_manager"/>
            <field name="arch" type="xml">

                <field name="state" position="before">
                    <button string="Mark as Draft" name="action_draft" type="object"
                            invisible=" state not in ['validate', 'refuse']"/>
                </field>


                <xpath expr="//field[@name='date_from']" position="attributes">
                    <attribute name="readonly">state != 'confirm'</attribute>
                </xpath>
                <xpath expr="//field[@name='date_to']" position="attributes">
                    <attribute name="readonly">state != 'confirm'</attribute>
                </xpath>

                <xpath expr="//field[@name='number_of_days_display']" position="attributes">
                    <attribute name="readonly">state != 'confirm'</attribute>
                </xpath>
                <xpath expr="//field[@name='number_of_hours_display']" position="attributes">
                    <attribute name="readonly">state != 'confirm'</attribute>
                </xpath>

            </field>
        </record>

        <!-- Inherit Form View to Modify it -->
        <record id="view_inherit_hr_leave_allocation_view_form" model="ir.ui.view">
            <field name="name">view.inherit.hr.leave.allocation.form</field>
            <field name="model">hr.leave.allocation</field>
            <field name="inherit_id" ref="hr_holidays.hr_leave_allocation_view_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='name']" position="attributes">
                    <attribute name="readonly">state != 'confirm'</attribute>
                </xpath>

            </field>
        </record>

    </data>
</odoo>